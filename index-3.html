<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>State Election Data Report</title>
  <style>
    :root {
      --bg: #F8FAFC;
      --card: #FFFFFF;
      --ink: #0F172A;
      --muted: #64748B;
      --border: #E2E8F0;
      --shadow: 0 10px 24px rgba(15,23,42,0.08);
      --blue: #2563EB;
      --red: #DC2626;
      --grid: #E5E7EB;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--ink);
      background: var(--bg);
    }
    .shell {
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 18px;
      padding: 18px;
      min-height: 100vh;
    }
    @media (max-width: 980px) {
      .shell { grid-template-columns: 1fr; }
    }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      box-shadow: var(--shadow);
    }
    .side {
      padding: 14px;
      position: sticky;
      top: 12px;
      align-self: start;
    }
    @media (max-width: 980px) {
      .side { position: relative; top: auto; }
    }
    .title {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 8px;
    }
    .title h1 {
      font-size: 16px;
      margin: 0;
      letter-spacing: 0.2px;
    }
    .title .hint {
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
    }
    .search {
      display: flex;
      gap: 8px;
      margin: 10px 0 12px;
    }
    .search input {
      flex: 1;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;
      font-size: 14px;
      outline: none;
    }
    .search button {
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;
      cursor: pointer;
      font-weight: 600;
    }
    .search button:hover { background: #F1F5F9; }

    .map {
      width: 100%;
      overflow: auto;
      padding: 8px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: #fff;
    }
    .gridmap {
      display: grid;
      grid-template-columns: repeat(12, 34px);
      grid-auto-rows: 34px;
      gap: 6px;
      width: max-content;
      margin: 0 auto;
    }
    .cell {
      width: 34px;
      height: 34px;
      border-radius: 10px;
      border: 1px solid var(--border);
      display: grid;
      place-items: center;
      font-weight: 800;
      font-size: 11px;
      cursor: pointer;
      user-select: none;
      transition: transform 80ms ease, box-shadow 120ms ease;
    }
    .cell:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(15,23,42,0.12);
    }
    .cell.active {
      outline: 2px solid rgba(37, 99, 235, 0.55);
      outline-offset: 2px;
    }
    .legend {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
      color: var(--muted);
      font-size: 12px;
    }
    .legendbar {
      height: 10px;
      flex: 1;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: linear-gradient(90deg, #DC2626 0%, #F8FAFC 50%, #2563EB 100%);
    }

    .main { padding: 0; }
    .header {
      display: flex;
      justify-content: space-between;
      gap: 14px;
      padding: 16px 16px 12px;
      border-bottom: 1px solid var(--border);
      align-items: center;
    }
    .stateTitle {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }
    .pill {
      width: 46px;
      height: 28px;
      border-radius: 999px;
      background: #E0F2FE;
      display: grid;
      place-items: center;
      font-weight: 800;
      border: 1px solid var(--border);
      flex: 0 0 auto;
    }
    .stateTitle h2 {
      margin: 0;
      font-size: 18px;
      line-height: 1.1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .stateTitle .sub {
      margin: 2px 0 0;
      font-size: 12px;
      color: var(--muted);
    }
    .kpis {
      display: grid;
      grid-template-columns: repeat(3, minmax(120px, 1fr));
      gap: 10px;
      align-items: stretch;
      width: 520px;
      max-width: 100%;
    }
    .kpi {
      background: #F1F5F9;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px 10px;
      font-size: 12px;
      color: var(--muted);
    }
    .kpi b {
      display: block;
      color: var(--ink);
      font-size: 14px;
      margin-top: 2px;
    }

    .content {
      padding: 16px;
      display: grid;
      grid-template-rows: auto auto;
      gap: 14px;
    }
    .block { padding: 14px; }
    .block h3 { margin: 0; font-size: 14px; }
    .block p { margin: 4px 0 0; color: var(--muted); font-size: 12px; }

    .stripRow {
      display: flex;
      gap: 6px;
      align-items: flex-end;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .stripCell {
      width: 52px;
      height: 30px;
      border-radius: 10px;
      border: 1px solid var(--border);
      display: grid;
      place-items: center;
      font-weight: 800;
      font-size: 12px;
    }
    .stripLbl {
      font-size: 11px;
      color: var(--muted);
      text-align: center;
      margin-top: 4px;
    }

    .chartWrap {
      margin-top: 12px;
      border-top: 1px solid var(--border);
      padding-top: 12px;
    }
    svg { width: 100%; height: 220px; display: block; }

    .row2 { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 1080px) {
      .row2 { grid-template-columns: 1fr; }
      .kpis { width: 100%; grid-template-columns: 1fr; }
      svg { height: 240px; }
    }

    table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 10px; font-size: 12px; }
    th, td { border: 1px solid var(--border); padding: 8px 8px; text-align: center; }
    th { background: #F1F5F9; color: var(--muted); font-weight: 800; }
    td.head { background: #F8FAFC; font-weight: 800; }
    td.dhead { background: #DBEAFE; font-weight: 900; }
    td.rhead { background: #FEE2E2; font-weight: 900; }

    .note { padding: 0 16px 14px; color: var(--muted); font-size: 12px; }
    .footer {
      padding: 10px 16px 16px;
      color: var(--muted);
      font-size: 12px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    a { color: var(--blue); text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card side">
      <div class="title">
        <h1>US State Report</h1>
        <div class="hint">Click a state</div>
      </div>

      <div class="search">
        <input id="searchBox" placeholder="Type: NC, Texas, District..." />
        <button id="goBtn">Go</button>
      </div>

      <div class="map">
        <div id="gridmap" class="gridmap" aria-label="US grid map"></div>
      </div>

      <div class="legend">
        <span>Lean 2024</span>
        <div class="legendbar" title="Red = more R than national; Blue = more D than national"></div>
      </div>

      <div style="margin-top:10px; color: var(--muted); font-size: 12px;">
        Data file: <code>state_report_data.csv</code><br/>
        Tip: append <code>#NC</code> to the URL to link a state directly.
      </div>
    </div>

    <div class="card main">
      <div class="header">
        <div class="stateTitle">
          <div class="pill" id="pill">--</div>
          <div style="min-width:0;">
            <h2 id="stateName">Select a state</h2>
            <div class="sub" id="subtitle">Presidential elections 2000–2024 • Projection: 2028 ratio</div>
          </div>
        </div>

        <div class="kpis">
          <div class="kpi">Lean 2024<b id="kpiLean">—</b></div>
          <div class="kpi">D ratio 2024<b id="kpiRatio">—</b></div>
          <div class="kpi">50–50 (2028) D<b id="kpi5050">—</b></div>
        </div>
      </div>

      <div class="content">
        <div class="card block">
          <h3>Relative partisan lean vs national</h3>
          <p>Lean = (State D–R) − (National D–R), in percentage points</p>

          <div class="stripRow" id="leanStrip"></div>

          <div class="chartWrap">
            <svg id="leanChart" viewBox="0 0 900 240" preserveAspectRatio="none"></svg>
          </div>
        </div>

        <div class="row2">
          <div class="card block">
            <h3>State-to-national Democratic ratio</h3>
            <p>Ratio = State D% / National D%</p>

            <div style="overflow:auto;">
              <table id="ratioTable"></table>
            </div>

            <div class="chartWrap">
              <svg id="ratioChart" viewBox="0 0 900 240" preserveAspectRatio="none"></svg>
            </div>
          </div>

          <div class="card block">
            <h3>Normalized result if national vote = 50–50</h3>
            <p>D = 50×ratio, R = 100−D (implied)</p>

            <div style="overflow:auto;">
              <table id="normTable"></table>
            </div>

            <div class="chartWrap">
              <svg id="normChart" viewBox="0 0 900 240" preserveAspectRatio="none"></svg>
            </div>
          </div>
        </div>
      </div>

      <div class="note">Note: Ratio-based projection is illustrative, not a forecast. Generated from provided inputs.</div>

      <div class="footer">
        <div>Source: your CSV inputs</div>
        <div><a href="state_report_data.csv" download>Download CSV</a></div>
      </div>
    </div>
  </div>

<script>
const YEARS_LEAN = [2000, 2004, 2008, 2012, 2016, 2020, 2024];
const YEARS_RATIO = [2000, 2004, 2008, 2012, 2016, 2020, 2024, 2028];
const GRID_POS = {"WA": [0, 0], "MT": [1, 0], "ND": [2, 0], "MN": [3, 0], "WI": [4, 0], "MI": [5, 0], "VT": [6, 0], "NH": [7, 0], "ME": [8, 0], "OR": [0, 1], "ID": [1, 1], "SD": [2, 1], "IA": [3, 1], "IL": [4, 1], "IN": [5, 1], "OH": [6, 1], "PA": [7, 1], "NY": [8, 1], "MA": [9, 1], "CA": [0, 2], "NV": [1, 2], "WY": [2, 2], "NE": [3, 2], "MO": [4, 2], "KY": [5, 2], "WV": [6, 2], "VA": [7, 2], "NJ": [8, 2], "CT": [9, 2], "RI": [10, 2], "AZ": [1, 3], "UT": [2, 3], "CO": [3, 3], "KS": [4, 3], "AR": [5, 3], "TN": [6, 3], "NC": [7, 3], "SC": [8, 3], "DE": [9, 3], "MD": [10, 3], "DC": [11, 3], "NM": [2, 4], "OK": [3, 4], "LA": [4, 4], "MS": [5, 4], "AL": [6, 4], "GA": [7, 4], "FL": [8, 4], "TX": [3, 5], "AK": [0, 6], "HI": [1, 6]};
let DATA = new Map(); // abbr -> row object

function clamp(v, a, b) { return Math.max(a, Math.min(b, v)); }
function lerp(a,b,t) { return a + (b-a)*t; }

function leanColor(v) {
  const vmin=-60, vmax=90;
  if (v === "" || v === null || v === undefined || Number.isNaN(v)) return "#FFFFFF";
  v = clamp(Number(v), vmin, vmax);
  if (v < 0) {
    const t = (v - vmin) / (0 - vmin);
    const r = lerp(0xDC, 0xF8, t);
    const g = lerp(0x26, 0xFA, t);
    const b = lerp(0x26, 0xFC, t);
    return `rgb(${Math.round(r)},${Math.round(g)},${Math.round(b)})`;
  } else {
    const t = (v - 0) / (vmax - 0);
    const r = lerp(0xF8, 0x25, t);
    const g = lerp(0xFA, 0x63, t);
    const b = lerp(0xFC, 0xEB, t);
    return `rgb(${Math.round(r)},${Math.round(g)},${Math.round(b)})`;
  }
}

function textColor(bg) {
  const m = bg.match(/\d+/g);
  if (!m) return "#0F172A";
  const [r,g,b] = m.map(Number);
  const lum = (0.2126*r + 0.7152*g + 0.0722*b)/255;
  return lum < 0.62 ? "#FFFFFF" : "#0F172A";
}

function parseCSV(text) {
  const lines = text.trim().split(/\r?\n/);
  const header = lines[0].split(",");
  const rows = [];
  for (let i=1;i<lines.length;i++) {
    const parts = lines[i].split(",");
    const obj = {};
    header.forEach((h,idx)=> obj[h] = (parts[idx] ?? "").trim());
    rows.push(obj);
  }
  return rows;
}

function fmt(v, digits=2) {
  if (v === "" || v === null || v === undefined) return "—";
  const n = Number(v);
  if (Number.isNaN(n)) return "—";
  const fixed = Math.abs(n) < 1e-9 ? 0 : n;
  return fixed.toFixed(digits).replace(/\.00$/, "");
}

function buildMap() {
  const el = document.getElementById("gridmap");
  el.innerHTML = "";
  Object.keys(GRID_POS).forEach(abbr => {
    const [col,row] = GRID_POS[abbr];
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.dataset.abbr = abbr;
    cell.style.gridColumn = (col+1);
    cell.style.gridRow = (row+1);
    cell.textContent = abbr;
    cell.addEventListener("click", () => selectState(abbr, true));
    el.appendChild(cell);
  });
  colorMap();
}

function colorMap() {
  document.querySelectorAll(".cell").forEach(cell => {
    const abbr = cell.dataset.abbr;
    const row = DATA.get(abbr);
    const v = row ? row["lean_2024"] : "";
    const bg = leanColor(v);
    cell.style.background = bg;
    cell.style.color = textColor(bg);
  });
}

function setActiveCell(abbr) {
  document.querySelectorAll(".cell").forEach(c => c.classList.toggle("active", c.dataset.abbr === abbr));
}

function makeLeanStrip(row) {
  const strip = document.getElementById("leanStrip");
  strip.innerHTML = "";
  YEARS_LEAN.forEach(y => {
    const v = row[`lean_${y}`];
    const bg = leanColor(v);
    const wrap = document.createElement("div");
    wrap.style.display = "grid";
    wrap.style.placeItems = "center";
    wrap.style.width = "58px";
    const cell = document.createElement("div");
    cell.className = "stripCell";
    cell.style.background = bg;
    cell.style.color = textColor(bg);
    cell.textContent = (v === "" ? "—" : fmt(v, 2));
    const lbl = document.createElement("div");
    lbl.className = "stripLbl";
    lbl.textContent = y;
    wrap.appendChild(cell);
    wrap.appendChild(lbl);
    strip.appendChild(wrap);
  });
}

function svgClear(svg) { while (svg.firstChild) svg.removeChild(svg.firstChild); }
function svgEl(tag, attrs={}) {
  const el = document.createElementNS("http://www.w3.org/2000/svg", tag);
  for (const [k,v] of Object.entries(attrs)) el.setAttribute(k, v);
  return el;
}

function niceStep(v) {
  if (v <= 0) return 1;
  const k = Math.floor(Math.log10(v));
  const base = Math.pow(10, k);
  const m = v / base;
  let s = 10;
  if (m <= 1) s = 1;
  else if (m <= 2) s = 2;
  else if (m <= 5) s = 5;
  return s * base;
}

function niceTicks(vmin, vmax, n=6) {
  if (vmin === vmax) {
    const step = 1;
    return [vmin-step, vmin, vmin+step];
  }
  const span = vmax - vmin;
  const step = niceStep(span / (n-1));
  const lo = Math.floor(vmin / step) * step;
  const hi = Math.ceil(vmax / step) * step;
  const ticks = [];
  for (let t=lo, i=0; i<120; i++, t += step) {
    ticks.push(t);
    if (t >= hi - 1e-9) break;
  }
  return ticks;
}

function lineChart(svgId, years, series, opts={}) {
  const svg = document.getElementById(svgId);
  svgClear(svg);
  const W = 900, H = 240;
  const padL = 62, padR = 18, padT = 14, padB = 36;
  const x0 = padL, y0 = padT, w = W - padL - padR, h = H - padT - padB;

  let all = [];
  series.forEach(s => all = all.concat(s.values));
  let ymin = Math.min(...all), ymax = Math.max(...all);
  const span = (ymax - ymin) || 1;
  const pad = span * 0.20;
  ymin -= pad; ymax += pad;

  if (opts.baseline !== undefined) {
    ymin = Math.min(ymin, opts.baseline - pad*0.5);
    ymax = Math.max(ymax, opts.baseline + pad*0.5);
  }
  if (opts.yFormat === "pct") {
    ymin = Math.max(0, ymin);
    ymax = Math.min(100, ymax);
    if ((ymax-ymin) < 28) {
      const mid = (ymin+ymax)/2;
      ymin = Math.max(0, mid-14);
      ymax = Math.min(100, mid+14);
    }
  }

  const ticks = niceTicks(ymin, ymax, 6);
  ymin = ticks[0]; ymax = ticks[ticks.length-1];

  const sx = (yr) => x0 + ( (yr - years[0]) / (years[years.length-1]-years[0]) ) * w;
  const sy = (v)  => y0 + (1 - ( (v - ymin) / (ymax - ymin) )) * h;

  ticks.forEach(t => {
    const y = sy(t);
    svg.appendChild(svgEl("line", {x1:x0, y1:y, x2:x0+w, y2:y, stroke:"var(--grid)", "stroke-width":"1"}));
    const lbl = opts.yFormat === "pct" ? String(Math.round(t)) : (Math.abs(t) < 1e-9 ? "0" : String(t).replace(/\.0+$/, ""));
    const txt = svgEl("text", {x:x0-8, y:y+4, "text-anchor":"end", "font-size":"11", fill:"var(--muted)"});
    txt.textContent = lbl;
    svg.appendChild(txt);
  });

  years.forEach(yr => {
    const x = sx(yr);
    svg.appendChild(svgEl("line", {x1:x, y1:y0, x2:x, y2:y0+h, stroke:"var(--grid)", "stroke-width":"1"}));
    const txt = svgEl("text", {x:x, y:y0+h+22, "text-anchor":"middle", "font-size":"11", fill:"var(--muted)"});
    txt.textContent = yr;
    svg.appendChild(txt);
  });

  if (opts.baseline !== undefined && opts.baseline >= ymin && opts.baseline <= ymax) {
    const y = sy(opts.baseline);
    svg.appendChild(svgEl("line", {x1:x0, y1:y, x2:x0+w, y2:y, stroke:"#94A3B8", "stroke-width":"2"}));
  }

  if (opts.yLabel) {
    const t = svgEl("text", {x:16, y:y0+h/2, "text-anchor":"middle", "font-size":"12", fill:"var(--muted)", transform:`rotate(-90 16 ${y0+h/2})`});
    t.textContent = opts.yLabel;
    svg.appendChild(t);
  }

  series.forEach(s => {
    const pts = s.values.map((v,i) => [sx(years[i]), sy(v)]);
    const d = pts.map((p,i) => (i===0 ? `M ${p[0]} ${p[1]}` : `L ${p[0]} ${p[1]}`)).join(" ");
    svg.appendChild(svgEl("path", {d, fill:"none", stroke:s.color, "stroke-width":"3.2"}));

    pts.forEach((p,i) => {
      svg.appendChild(svgEl("circle", {cx:p[0], cy:p[1], r:4.2, fill:s.color}));
      if (s.annotate) {
        const a = s.annotate(years[i], s.values[i], i);
        const txt = svgEl("text", {
          x: p[0] + a.dx, y: p[1] + a.dy,
          "text-anchor":"middle",
          "font-size": a.size || 11,
          "font-weight": a.bold ? "800" : "600",
          fill: a.textColor || "var(--ink)"
        });
        txt.textContent = a.text;
        svg.appendChild(txt);
      }
    });
  });
}

function buildTableRatio(row) {
  const table = document.getElementById("ratioTable");
  const head = `<tr><th></th>${YEARS_RATIO.map(y=>`<th>${y}</th>`).join("")}</tr>`;
  const vals = YEARS_RATIO.map(y => fmt(row[`ratioD_${y}`], 4));
  const body = `<tr><td class="head">D ratio</td>${vals.map(v=>`<td>${v}</td>`).join("")}</tr>`;
  table.innerHTML = head + body;
}

function buildTableNorm(row) {
  const table = document.getElementById("normTable");
  const head = `<tr><th></th>${YEARS_RATIO.map(y=>`<th>${y}</th>`).join("")}</tr>`;
  const d = YEARS_RATIO.map(y => `${Math.round(Number(row[`normD_${y}`]))}%`);
  const r = YEARS_RATIO.map(y => `${Math.round(Number(row[`normR_${y}`]))}%`);
  const body = `
    <tr><td class="dhead">D</td>${d.map(v=>`<td>${v}</td>`).join("")}</tr>
    <tr><td class="rhead">R</td>${r.map(v=>`<td>${v}</td>`).join("")}</tr>`;
  table.innerHTML = head + body;
}

function selectState(abbr, updateHash) {
  const row = DATA.get(abbr);
  if (!row) return;

  setActiveCell(abbr);

  document.getElementById("pill").textContent = abbr;
  document.getElementById("stateName").textContent = row.name;

  document.getElementById("kpiLean").textContent = (row.lean_latest === "" ? "—" : fmt(row.lean_latest, 2));
  document.getElementById("kpiRatio").textContent = fmt(row.ratio_latest, 3);
  document.getElementById("kpi5050").textContent = `${Math.round(Number(row.normD_2028))}%`;

  makeLeanStrip(row);
  buildTableRatio(row);
  buildTableNorm(row);

  const leanVals = YEARS_LEAN.map(y => Number(row[`lean_${y}`]));
  lineChart("leanChart", YEARS_LEAN, [{
      values: leanVals,
      color: "var(--red)",
      annotate: (yr, v) => ({ text: (Math.abs(v) < 1e-9 ? "0" : String(v)), dx: 0, dy: -10, bold: true })
  }], { yLabel: "Lean (pts)", baseline: 0 });

  const ratioVals = YEARS_RATIO.map(y => Number(row[`ratioD_${y}`]));
  lineChart("ratioChart", YEARS_RATIO, [{
      values: ratioVals,
      color: "var(--blue)",
      annotate: (yr, v) => ({ text: v.toFixed(3), dx: 0, dy: -10, bold: true })
  }], { yLabel: "D ratio", baseline: 1 });

  const normD = YEARS_RATIO.map(y => Number(row[`normD_${y}`]));
  const normR = YEARS_RATIO.map(y => Number(row[`normR_${y}`]));
  lineChart("normChart", YEARS_RATIO, [
    { values: normD, color: "var(--blue)", annotate: (yr, v) => ({ text: `${Math.round(v)}%`, dx: 0, dy: 16, bold: true, textColor: "var(--blue)" }) },
    { values: normR, color: "var(--red)",  annotate: (yr, v) => ({ text: `${Math.round(v)}%`, dx: 0, dy: -10, bold: true, textColor: "var(--red)" }) }
  ], { yLabel: "Share (%)", yFormat: "pct" });

  if (updateHash) location.hash = abbr;
}

function bestMatch(query) {
  query = (query || "").trim().toLowerCase();
  if (!query) return null;
  const ab = query.toUpperCase();
  if (DATA.has(ab)) return ab;
  for (const [k,v] of DATA.entries()) if (v.name.toLowerCase() === query) return k;
  for (const [k,v] of DATA.entries()) if (v.name.toLowerCase().includes(query)) return k;
  return null;
}

async function init() {
  const resp = await fetch("state_report_data.csv", {cache:"no-store"});
  const text = await resp.text();
  const rows = parseCSV(text);
  rows.forEach(r => DATA.set(r.abbr, r));

  buildMap();
  colorMap();

  const h = (location.hash || "").replace("#","").toUpperCase();
  const first = DATA.has(h) ? h : (DATA.has("NC") ? "NC" : rows[0]?.abbr);
  if (first) selectState(first, false);

  document.getElementById("goBtn").addEventListener("click", () => {
    const q = document.getElementById("searchBox").value;
    const m = bestMatch(q);
    if (m) selectState(m, true);
  });
  document.getElementById("searchBox").addEventListener("keydown", (e) => {
    if (e.key === "Enter") document.getElementById("goBtn").click();
  });

  window.addEventListener("hashchange", () => {
    const h2 = (location.hash || "").replace("#","").toUpperCase();
    if (DATA.has(h2)) selectState(h2, false);
  });
}

init();
</script>
</body>
</html>
